<!DOCTYPE html>
<html>
<head lang="en">
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, interactive-widget=resizes-content" />
    <meta name="HandheldFriendly" content="True">
    <title>Crossword Nexus Solver</title>
    <link href="css/crosswordnexus.css" rel="stylesheet">
    <!-- additional styles for solve tracker -->
    <link href="css/styles2.css" rel="stylesheet">

    <!-- the main crossword JavaScript -->
    <script src="js/crosswords.js"></script>

    <!-- Auxiliary JS for solve tracker -->
    <script src="js/crosswords2.js"></script>

    <!-- jQuery -->
    <script src="lib/jquery.js"></script>

    <!-- for loading crosswords -->
    <script src="lib/jscrossword_combined.js"></script>

    <!-- for saving crosswords -->
    <script src="lib/lscache.min.js"></script>

    <!-- for printing -->
    <script src="lib/jspdf-2_5_1.min.js"></script>
    <script src="lib/xw_pdf.js"></script>

    <!-- for dark mode -->
    <script src="lib/darkreader.min.js"></script>

    <style>
        html, body {
            /* height: 100%; */
            margin: 0;
            background-color: white;
        }
        div.crossword { position: absolute; left: 0; top: 0; width: 100%; height: 100%; }
    </style>
</head>
<body>
    <!-- data list for the source dropdown -->
    <datalist id="puzzle-sources"></datalist>
    <!-- The div in which the crossword will be created -->
    <div class="crossword"></div>

<script>
    (function(){
        // Grab puzzle from query string if available
        var url = new URL(window.location.href);
        var puzzle = url.searchParams.get("puzzle");
        if (!puzzle) puzzle = url.searchParams.get("file");

        // optional puzzle parameters
        // for options, see line 141 in crosswords.js.
        var params = {};
        if (puzzle) {
            params['puzzle_file'] = {
                url: puzzle,
                type: puzzle.slice(puzzle.lastIndexOf('.') + 1)
            };
        }

        // you can also set parameters in the URL
        // as a base64-encoded JSON blob
        var b64config = url.searchParams.get("config");
        if (b64config) {
            var config = JSON.parse(atob(b64config));
            params = Object.assign(params, config);
        }

        // populate the datalist
        const datalist = document.getElementById('puzzle-sources');

        // Populate the datalist dynamically
        SOURCES.sort().forEach(source => {
            const option = document.createElement('option');
            option.value = source;
            datalist.appendChild(option);
        });

        // Create the crossword
        CrosswordNexus.createCrossword($('div.crossword'), params);
    })();
</script>

</body>
</html>
