<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Crossword Sharing | Crossword Nexus</title>

    <link rel="stylesheet" href="share.css" />
</head>

<body class="container">
  <h1>Crossword Sharing</h1>

  <p>
    This page lets you turn a crossword file into a shareable link or an embeddable iframe you can post anywhere.
  </p>
  <p>
    Everything happens right here in your browser â€” nothing gets uploaded or stored online.
  </p>
  <details>
    <summary>Learn more</summary>
    Choose a puzzle file (<code>.puz</code>, <code>.jpz</code>, <code>.ipuz</code>, or <code>.cfp</code>) and this page will read it locally
    using JavaScript. Once loaded, you can customize colors, replace circles with shading,
    and instantly generate a link or embed code to share the puzzle however you'd like.
    We don't have a terms of service because we donâ€™t store files, track usage, or keep logs of any kind.
  </details>

  <p>Select a <code>.puz</code>, <code>.jpz</code>, <code>.ipuz</code>, or <code>.cfp</code> file:</p>
  <input type="file" id="fileInput" accept=".puz,.jpz,.ipuz,.cfp" />
  <div id="dropZone">... or drop your puzzle file here</div>
  <div id="status"></div>

  <!-- ðŸ§© Customization section -->
  <!-- Grouped appearance controls -->
  <div id="customization" class="hidden customization">
    <h3>Customize your puzzle appearance</h3>
    <label>
      Primary color:
      <input type="color" id="primaryColor" value="#FEE300" />
    </label>
    <label>
      Secondary color:
      <input type="color" id="secondaryColor" value="#FF4136" />
    </label>
    <label>
      <input type="checkbox" id="replaceCircles" />
      Replace circles with shade
    </label>
    <details id="gridCustomization" class="hidden">
      <summary>Customize individual cells</summary>
      <p style="margin: 0.5rem 0 0;">Click a cell to assign a color or upload an image that will show up when the puzzle is shared.</p>
      <div id="gridPreview" aria-live="polite" aria-label="Puzzle grid preview"></div>
      <div id="cellActions" class="hidden">
        <div>
          <strong id="selectedCellLabel"></strong>
        </div>
        <label>
          Pick a color:
          <input type="color" id="cellColorPicker" value="#ffffff" />
          <button type="button" id="chooseCellColor">Choose</button>
        </label>
        <div id="colorHistory" class="color-history" aria-label="Recently used colors"></div>
        <label>
          Upload an image:
          <input type="file" id="cellImageInput" accept="image/*" />
        </label>
        <div class="cell-actions-footer">
          <button type="button" id="clearCellOverrides">Clear overrides</button>
          <button type="button" id="clearCellColor">Clear color</button>
        </div>
      </div>
    </details>
    <!-- Submit shows only after a puzzle loads -->
    <button id="submitCustomization" class="hidden">Submit</button>
  </div>

  <div id="results" class="hidden">
    <h3>Shareable Link:</h3>
    <textarea id="shareLink" rows="2" readonly></textarea>
    <button id="copyLink">Copy Link</button>

    <h3>Embed (iframe):</h3>
    <textarea id="embedCode" rows="3" readonly></textarea>
    <button id="copyEmbed">Copy Embed Code</button>
  </div>

  <script src="./lib/jscrossword_combined.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/compressorjs/1.1.1/compressor.min.js" integrity="sha512-yY/fIOn6Q0z3RixI+h7P84oM+hGxwkT8KI2Dq95E9fuflTpx3yXZGXrkDzR+kQoqfvWy6nRLgisrJn3yTK2Ysw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <script src="./share.js"></script>
</body>

</html>
